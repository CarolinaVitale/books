(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{113:function(e,t,a){},145:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),o=a(31),r=a.n(o),c=a(3),i=a(8),l=a(10),j=a(12),h=a(11),d=(a(113),a(114),a(17)),b=a(93),u=a(158),p=a(159),m=a(163),O=a(21),x=a.n(O),f=function e(){var t=this;Object(i.a)(this,e),this.users=function(){return t.app.get("/users")},this.profile=function(e){return t.app.get("/profile",e)},this.othersProfile=function(e){return t.app.get("/profile/".concat(e))},this.editProfile=function(e){return t.app.put("/profile/",e)},this.deleteProfile=function(){return t.app.delete("/profile")},this.followUnfollow=function(e,a,s){return t.app.put("/profile/".concat(s),{follow_id:e,follow:a})},this.app=x.a.create({baseURL:"".concat("https://for-words.herokuapp.com/"),withCredentials:!0})},g=function e(){var t=this;Object(i.a)(this,e),this.bookCreate=function(e){return t.app.post("/create",e)},this.bookList=function(){return t.app.get("/list")},this.bookToConfirm=function(){return t.app.get("/confirm/list")},this.bookConfirmed=function(e,a){return t.app.put("/confirm/".concat(a),{accepted:e})},this.bookDetails=function(e){return t.app.get("/details/".concat(e))},this.bookEdit=function(e,a){return t.app.put("/".concat(a),e)},this.bookDelete=function(){return t.app.delete("/:book_id")},this.app=x.a.create({baseURL:"".concat("https://for-words.herokuapp.com/","/book"),withCredentials:!0})},v=a(41),C=a(169),k=a(160),S=a(13),w=a(0),N=function(e){var t=e.firstName,a=e.cover,s=e._id;return Object(w.jsx)(b.a,{lg:2,children:Object(w.jsx)(S.b,{to:"/profile/"+s,children:Object(w.jsx)(u.a,{className:"card-image",variant:"top",src:a,alt:t+"profile"})})})},y=function(e){var t=e.friends;return t?t.map((function(e){return Object(w.jsx)(N,Object(c.a)({},e),e._id)})):null},I=function(e){var t=e.image,a=e.title,s=(e.description,e.price,e.currency,e._id);return Object(w.jsx)(b.a,{lg:2,children:Object(w.jsx)(S.b,{to:"/book/details/"+s,children:Object(w.jsx)(u.a,{className:"card-image",variant:"top",src:t,alt:a+"profile image"})})})},U=function(e){var t=e.books;return t?t.map((function(e){return Object(w.jsx)(I,Object(c.a)({},e),e._id)})):null},L=function(e){var t=e.image,a=e.title,s=e._id;return Object(w.jsx)(b.a,{lg:2,children:Object(w.jsx)(S.b,{to:"/post/details/"+s,children:Object(w.jsx)(u.a,{className:"card-image",variant:"top",src:t,alt:a+"profile image"})})})},F=function(e){var t=e.posts;return t?t.map((function(e){return Object(w.jsx)(L,Object(c.a)({},e),e._id)})):null},D=function(e){var t=e.friends,a=e.books,n=e.posts,o=Object(s.useState)("friends"),r=Object(v.a)(o,2),c=r[0],i=r[1];return Object(w.jsx)(p.a,{children:Object(w.jsx)(b.a,{className:"profile-navbar",children:Object(w.jsxs)(C.a,{id:"controlled-tab-example",activeKey:c,onSelect:function(e){return i(e)},children:[Object(w.jsx)(k.a,{eventKey:"friends",title:"Friends",children:Object(w.jsx)(p.a,{children:Object(w.jsx)(y,{friends:t})})}),Object(w.jsx)(k.a,{eventKey:"books",title:"Books",children:Object(w.jsx)(p.a,{children:Object(w.jsx)(U,{books:a})})}),Object(w.jsx)(k.a,{eventKey:"post",title:"Post",children:Object(w.jsx)(p.a,{children:Object(w.jsx)(F,{posts:n})})})]})})})},G=a(14),_=a(161),M=a(166),B=function e(){var t=this;Object(i.a)(this,e),this.uploadImage=function(e){return t.app.post("/image",e)},this.app=x.a.create({baseURL:"".concat("https://for-words.herokuapp.com/","/upload"),withCredentials:!0})},P=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleInputChange=function(t){var a=t.target,s=a.name,n=a.value;e.setState({book:Object(c.a)(Object(c.a)({},e.state.book),{},Object(G.a)({},s,n))})},e.handleFormSubmit=function(t){t.preventDefault(),e.bookService.bookCreate(e.state.book).then((function(){e.props.history.push("/"),e.props.closeModal()})).catch((function(e){return console.log(e)}))},e.handleFileUpload=function(t){e.setState({loading:!0});var a=new FormData;a.append("image-data",t.target.files[0]),e.uploadsService.uploadImage(a).then((function(a){e.setState({loading:!1,book:Object(c.a)(Object(c.a)({},e.state.book),{},Object(G.a)({},t.target.name,a.data.cloudinary_url))})})).catch((function(e){return console.log(e)}))},e.state={book:{title:"",author:"",publisher:"",image:"",description:"",accepted:"",price:"",currency:"",review:"",owner:""},loading:!1},e.bookService=new g,e.uploadsService=new B,e}return Object(l.a)(a,[{key:"render",value:function(){return Object(w.jsx)(_.a,{children:Object(w.jsx)(p.a,{children:Object(w.jsxs)(b.a,{md:{span:8,offset:2},children:[Object(w.jsx)("h1",{children:"New Book"}),Object(w.jsx)("hr",{}),Object(w.jsxs)(M.a,{onSubmit:this.handleFormSubmit,children:[Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"title",children:[Object(w.jsx)(M.a.Label,{children:"Title"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.title,onChange:this.handleInputChange,name:"title",placeholder:"Title"})]})}),Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"description",children:[Object(w.jsx)(M.a.Label,{children:"Description"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.description,onChange:this.handleInputChange,name:"description",placeholder:"Description"})]})}),Object(w.jsxs)(p.a,{className:"mb-3",children:[Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"author",children:[Object(w.jsx)(M.a.Label,{children:"Author"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.author,onChange:this.handleInputChange,name:"author",placeholder:"Author"})]}),Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"publisher",children:[Object(w.jsx)(M.a.Label,{children:"Publisher"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.publisher,onChange:this.handleInputChange,name:"publisher",placeholder:"Publisher"})]})]}),Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"description",children:[Object(w.jsx)(M.a.Label,{children:"Description"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.description,onChange:this.handleInputChange,name:"description",placeholder:"Description"})]})}),Object(w.jsxs)(M.a.Group,{className:"mb-3",controlId:"price",children:[Object(w.jsx)(M.a.Label,{children:"Price"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.price,onChange:this.handleInputChange,name:"price",placeholder:"Price"})]}),Object(w.jsxs)(M.a.Group,{className:"mb-3",controlId:"image",children:[Object(w.jsx)(M.a.Label,{children:"Image"}),Object(w.jsx)(M.a.Control,{name:"image",type:"file",onChange:this.handleFileUpload})]}),Object(w.jsx)("button",{className:"btn-form",type:"submit",children:"Submit"})]}),Object(w.jsx)("hr",{}),Object(w.jsx)(S.b,{to:"/",children:Object(w.jsx)("button",{className:"btn-form",children:"go back"})})]})})})}}]),a}(s.Component),T=function e(){var t=this;Object(i.a)(this,e),this.postCreate=function(e){return t.app.post("/create",e)},this.postList=function(){return t.app.get("/list")},this.postDetails=function(e){return t.app.get("/details/".concat(e))},this.postEdit=function(e,a){return t.app.put("/".concat(a),e)},this.postDelete=function(){return t.app.delete("/:post_id")},this.app=x.a.create({baseURL:"".concat("https://for-words.herokuapp.com/","/post"),withCredentials:!0})},z=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleInputChange=function(t){var a=t.target,s=a.name,n=a.value;e.setState({post:Object(c.a)(Object(c.a)({},e.state.post),{},Object(G.a)({},s,n))})},e.handleFormSubmit=function(t){t.preventDefault(),e.postService.postCreate(e.state.post).then((function(){e.props.history.push("/"),e.props.closeModal()})).catch((function(e){return console.log(e)}))},e.handleFileUpload=function(t){e.setState({loading:!0});var a=new FormData;a.append("image-data",t.target.files[0]),e.uploadsService.uploadImage(a).then((function(t){e.setState({loading:!1,post:Object(c.a)(Object(c.a)({},e.state.post),{},{image:t.data.cloudinary_url})})})).catch((function(e){return console.log(e)}))},e.state={post:{title:"",text:"",image:"",review:"",owner:""},loading:!1},e.postService=new T,e.uploadsService=new B,e}return Object(l.a)(a,[{key:"render",value:function(){return Object(w.jsx)(_.a,{children:Object(w.jsx)(p.a,{children:Object(w.jsxs)(b.a,{md:{span:8,offset:2},children:[Object(w.jsx)("h1",{children:"New Post"}),Object(w.jsx)("hr",{}),Object(w.jsxs)(M.a,{onSubmit:this.handleFormSubmit,children:[Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"title",children:[Object(w.jsx)(M.a.Label,{children:"Title"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.title,onChange:this.handleInputChange,name:"title",placeholder:"Title"})]})}),Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"text",children:[Object(w.jsx)(M.a.Label,{children:"Text"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.text,onChange:this.handleInputChange,name:"text",placeholder:"Text"})]})}),Object(w.jsxs)(M.a.Group,{className:"mb-3",controlId:"image",children:[Object(w.jsx)(M.a.Label,{children:"Image"}),Object(w.jsx)(M.a.Control,{name:"image",type:"file",className:"custom-file-input",id:"customFile",onChange:this.handleFileUpload})]}),Object(w.jsx)("button",{className:"btn-form",type:"submit",children:"Submit"})]}),Object(w.jsx)("hr",{}),Object(w.jsx)(S.b,{to:"/",children:Object(w.jsx)("button",{className:"btn-form",children:"go back"})})]})})})}}]),a}(s.Component),R=a(162),E=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).loadFormInfo=function(){e.userService.profile().then((function(t){return e.setState({user:t.data[0]})}))},e.handleInputChange=function(t){var a,s=t.target,n=s.name,o=s.value;console.log(t.target.value),e.setState({user:Object(c.a)(Object(c.a)({},e.state.user),{},(a={},Object(G.a)(a,n,o),Object(G.a)(a,"address",Object(c.a)(Object(c.a)({},e.state.user.address),{},Object(G.a)({},n,o))),a))})},e.handleFormSubmit=function(t){var a=e.props.match.params.user_id;console.log(e.state.user),t.preventDefault(),e.userService.editProfile(e.state.user,a).then((function(){e.props.history.push("/"),e.props.closeModal()})).catch((function(e){return console.log(e)}))},e.handleFileUpload=function(t){e.setState({loading:!0});var a=new FormData;a.append("image-data",t.target.files[0]),e.uploadsService.uploadImage(a).then((function(a){e.setState({loading:!1,user:Object(c.a)(Object(c.a)({},e.state.user),{},Object(G.a)({},t.target.name,a.data.cloudinary_url))})})).catch((function(e){return console.log(e)}))},e.state={user:{email:"",password:"",firstName:"",lastName:"",image:"",cover:"",bio:""},address:{road:"",apartment:"",city:"",state:"",zip:""},loading:!1},e.userService=new f,e.uploadsService=new B,e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.user_id;this.loadFormInfo(e)}},{key:"render",value:function(){var e,t,a,s,n;return Object(w.jsx)(_.a,{children:this.state.user?Object(w.jsx)(p.a,{children:Object(w.jsxs)(b.a,{md:{span:8,offset:2},children:[Object(w.jsxs)("h1",{children:["Edit ",this.state.user.firstName," ",this.state.user.lastName]}),Object(w.jsx)("hr",{}),Object(w.jsxs)(M.a,{onSubmit:this.handleFormSubmit,children:[Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"email",children:[Object(w.jsx)(M.a.Label,{children:"email"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.user.email,onChange:this.handleInputChange,name:"email",placeholder:"Username"})]})}),Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"password",children:[Object(w.jsx)(M.a.Label,{children:"Password"}),Object(w.jsx)(M.a.Control,{type:"password",value:this.state.user.password,onChange:this.handleInputChange,name:"password",placeholder:"Password"})]})}),Object(w.jsxs)(p.a,{className:"mb-3",children:[Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"firstName",children:[Object(w.jsx)(M.a.Label,{children:"First name"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.user.firstName,onChange:this.handleInputChange,name:"firstName",placeholder:"First name"})]}),Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"lastName",children:[Object(w.jsx)(M.a.Label,{children:"Last name"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.user.lastName,onChange:this.handleInputChange,name:"lastName",placeholder:"Last name"})]})]}),Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"bio",children:[Object(w.jsx)(M.a.Label,{children:"Bio"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.user.bio,onChange:this.handleInputChange,name:"bio",placeholder:"Bio"})]})}),Object(w.jsxs)(M.a.Group,{className:"mb-3",controlId:"road",children:[Object(w.jsx)(M.a.Label,{children:"Address"}),Object(w.jsx)(M.a.Control,{type:"text",value:null===(e=this.state.user.address)||void 0===e?void 0:e.road,onChange:this.handleInputChange,name:"road",placeholder:"Street, number"})]}),Object(w.jsxs)(M.a.Group,{className:"mb-3",controlId:"apartment",children:[Object(w.jsx)(M.a.Label,{children:"Address 2"}),Object(w.jsx)(M.a.Control,{type:"text",value:null===(t=this.state.user.address)||void 0===t?void 0:t.apartment,onChange:this.handleInputChange,name:"apartment",placeholder:"Apartment, studio, or floor"})]}),Object(w.jsxs)(p.a,{className:"mb-3",children:[Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"city",children:[Object(w.jsx)(M.a.Label,{children:"City"}),Object(w.jsx)(M.a.Control,{type:"text",value:null===(a=this.state.user.address)||void 0===a?void 0:a.city,onChange:this.handleInputChange,name:"city",placeholder:"City"})]}),Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"state",children:[Object(w.jsx)(M.a.Label,{children:"State"}),Object(w.jsx)(M.a.Control,{type:"text",value:null===(s=this.state.user.address)||void 0===s?void 0:s.state,onChange:this.handleInputChange,name:"state",placeholder:"State"})]}),Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"zip",children:[Object(w.jsx)(M.a.Label,{children:"Zip"}),Object(w.jsx)(M.a.Control,{type:"text",value:null===(n=this.state.user.address)||void 0===n?void 0:n.zip,onChange:this.handleInputChange,name:"zip",placeholder:"Zip"})]})]}),Object(w.jsx)("img",{style:{width:"100px"},src:this.state.user.image,alt:"image"}),Object(w.jsxs)(M.a.Group,{className:"mb-3",controlId:"image",children:[Object(w.jsx)(M.a.Label,{children:"Image"}),Object(w.jsx)(M.a.Control,{name:"image",type:"file",onChange:this.handleFileUpload})]}),Object(w.jsx)("img",{style:{width:"100px"},src:this.state.user.cover,alt:"cover"}),Object(w.jsxs)(M.a.Group,{className:"mb-3",controlId:"cover",children:[Object(w.jsx)(M.a.Label,{children:"Cover"}),Object(w.jsx)(M.a.Control,{name:"cover",type:"file",onChange:this.handleFileUpload})]}),Object(w.jsx)("button",{className:"btn-form",type:"submit",children:"edit"})]}),Object(w.jsx)("hr",{}),Object(w.jsx)(S.b,{to:"/",children:Object(w.jsx)("button",{className:"btn-form",children:"go back"})})]})}):Object(w.jsx)(R.a,{})})}}]),a}(s.Component),A=function(e){var t=e.books,a=Object(s.useState)("friends"),n=Object(v.a)(a,2),o=n[0],r=n[1];return Object(w.jsx)(p.a,{children:Object(w.jsx)(b.a,{className:"profile-bar",children:Object(w.jsxs)(C.a,{id:"controlled-tab-example",activeKey:o,onSelect:function(e){return r(e)},children:[Object(w.jsx)(k.a,{eventKey:"books",title:"Books To Confirm",children:Object(w.jsx)(p.a,{children:Object(w.jsx)(U,{books:t})})}),Object(w.jsx)(k.a,{eventKey:"emails",title:"Emails",children:Object(w.jsx)(p.a,{})})]})})})},H=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).loadBookForAdmin=function(){e.bookService.bookToConfirm().then((function(t){return e.setState({booksToConfirm:t.data})})).catch((function(e){return console.log(e)}))},e.loadUser=function(){e.userService.profile().then((function(t){return e.setState({friends:t.data[0].friends,books:t.data[1],posts:t.data[2]})})).catch((function(e){return console.log(e)}))},e.componentDidMount=function(){e.loadUser(),e.loadBookForAdmin()},e.state={books:void 0,post:void 0,booksToConfirm:void 0,modal:!1,modal2:!1,adminModal:!1},e.userService=new f,e.bookService=new g,e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.loggedUser,s=t.storeUser,n=t.history;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(b.a,{md:{span:4,offset:4},children:[Object(w.jsx)(u.a,{className:"cover-img",src:a.cover}),Object(w.jsx)(u.a,{className:"profile-img",src:a.image,roundedCircle:!0}),Object(w.jsxs)("h3",{className:"profile-name",children:[a.firstName," ",a.lastName," ",Object(w.jsx)(u.a,{className:"profile-check",src:""})]}),Object(w.jsx)("p",{className:"profile-email",children:a.email}),Object(w.jsx)("p",{className:"profile-bio",children:a.bio}),Object(w.jsx)("br",{})]}),"ADMIN"===a.role?Object(w.jsx)(b.a,{md:{span:4,offset:4},children:Object(w.jsxs)(p.a,{className:"mb-3",children:[" ",Object(w.jsx)("button",{className:"create-button",onClick:function(){return e.setState({adminModal:!0})},children:"Admin Panel"})]})}):Object(w.jsx)(b.a,{md:{span:4,offset:4},children:Object(w.jsx)(p.a,{className:"mb-3"})}),Object(w.jsx)(b.a,{md:{span:4,offset:4},children:Object(w.jsxs)(p.a,{className:"mb-3",children:[Object(w.jsx)(b.a,{children:Object(w.jsx)("button",{className:"blue-button",onClick:function(){return e.setState({modal:!0,isPost:!1})},children:"add book"})}),Object(w.jsx)(b.a,{children:Object(w.jsx)("button",{className:"blue-button",onClick:function(){return e.setState({modal:!0,isPost:!0})},children:"add post"})}),Object(w.jsxs)(m.a,{backdrop:"static",keyboard:!1,size:"lg",show:this.state.modal,onHide:function(){return e.setState({modal:!1})},children:[Object(w.jsx)(m.a.Header,{closeButton:!0}),Object(w.jsx)(m.a.Body,{children:this.state.isPost?Object(w.jsx)(z,{history:n,closeModal:function(){return e.setState({modal:!1})},loggedUser:a,storeUser:s}):Object(w.jsx)(P,{history:n,closeModal:function(){return e.setState({modal:!1})},loggedUser:a,storeUser:s})})]}),Object(w.jsxs)(b.a,{children:[Object(w.jsx)("button",{className:"pink-button",onClick:function(){return e.setState({modal2:!0})},children:"edit profile"})," "]}),Object(w.jsxs)(m.a,{backdrop:"static",keyboard:!1,size:"lg",show:this.state.modal2,onHide:function(){return e.setState({modal2:!1})},children:[Object(w.jsx)(m.a.Header,{closeButton:!0}),Object(w.jsx)(m.a.Body,{children:Object(w.jsx)(E,Object(c.a)(Object(c.a)({},this.props),{},{history:n,closeModal:function(){return e.setState({modal2:!1})},loggedUser:a,storeUser:s}))})]}),Object(w.jsxs)(m.a,{backdrop:"static",keyboard:!1,size:"lg",show:this.state.adminModal,onHide:function(){return e.setState({adminModal:!1})},children:[Object(w.jsx)(m.a.Header,{closeButton:!0}),Object(w.jsx)(m.a.Body,{children:Object(w.jsx)(A,{books:this.state.booksToConfirm})})]})]})}),Object(w.jsx)("br",{}),Object(w.jsx)(D,Object(c.a)(Object(c.a)({},this.props),{},{books:this.state.books,friends:this.state.friends,posts:this.state.posts}))]})}}]),a}(s.Component),K=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).followUnfollow=function(t,a,s){e.userService.followUnfollow(t,a,s).then((function(t){return e.props.storeUser(t.data)})).catch((function(e){return console.log(e)}))},e.follow=function(t,a){return e.followUnfollow(t,!0,a)},e.unfollow=function(t,a){return e.followUnfollow(t,!1,a)},e.loadUser=function(){var t=e.props.match.params.user_id;e.userService.othersProfile(t).then((function(e){return console.log("res.data",e.data),e})).then((function(t){return e.setState({otherUser:t.data[0],friends:t.data[0].friends,books:t.data[1],posts:t.data[2]})})).catch((function(e){return console.log(e)}))},e.componentDidMount=function(){e.loadUser()},e.state={otherUser:void 0,books:void 0,friends:void 0,posts:void 0},e.userService=new f,e}return Object(l.a)(a,[{key:"render",value:function(){var e,t,a=this,s=this.props,n=s.loggedUser,o=s.storeUser,r=s.history;return this.state.otherUser?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(b.a,{md:{span:6,offset:3},children:[Object(w.jsx)(u.a,{className:"cover-img",src:this.state.otherUser.cover}),Object(w.jsx)(u.a,{className:"profile-img",src:this.state.otherUser.image,roundedCircle:!0}),Object(w.jsxs)("h3",{className:"profile-name",children:[this.state.otherUser.firstName," ",this.state.otherUser.lastName]}),Object(w.jsx)("p",{className:"profile-email",children:this.state.otherUser.email}),Object(w.jsx)("p",{className:"profile-bio",children:this.state.otherUser.bio}),Object(w.jsx)("br",{})]}),Object(w.jsx)(b.a,{md:{span:4,offset:4},children:Object(w.jsxs)(p.a,{className:"mb-3",children:[Object(w.jsx)(b.a,{children:Object(w.jsx)("button",{className:"create-button",onClick:function(){return a.setState({modal:!0,isPost:!1})},children:"add book"})}),Object(w.jsx)(b.a,{children:Object(w.jsx)("button",{className:"create-button",onClick:function(){return a.setState({modal:!0,isPost:!0})},children:"add post"})}),Object(w.jsxs)(m.a,{backdrop:"static",keyboard:!1,size:"lg",show:this.state.modal,onHide:function(){return a.setState({modal:!1})},children:[Object(w.jsx)(m.a.Header,{closeButton:!0}),Object(w.jsx)(m.a.Body,{children:this.state.isPost?Object(w.jsx)(z,{history:r,closeModal:function(){return a.setState({modal:!1})},loggedUser:n,storeUser:o}):Object(w.jsx)(P,{history:r,closeModal:function(){return a.setState({modal:!1})},loggedUser:n,storeUser:o})})]}),n?Object(w.jsx)(b.a,{children:(e=n.friends,t=this.state.otherUser._id,console.log("alooo",e,t),e.find((function(e){return e===t}))?Object(w.jsx)("button",{className:"follow-button",onClick:function(){return a.follow(a.state.otherUser._id,n._id)},loggedUser:n,children:"unfollow"}):Object(w.jsx)("button",{className:"follow-button",onClick:function(){return a.unfollow(a.state.otherUser._id,n._id)},loggedUser:n,children:"follow"}))}):Object(w.jsx)(R.a,{className:"spinner",animation:"grow",variant:"info",size:"lg"})]})}),Object(w.jsx)("br",{}),Object(w.jsx)(D,Object(c.a)(Object(c.a)({},this.props),{},{books:this.state.books,friends:this.state.friends,posts:this.state.posts}))]}):Object(w.jsx)(R.a,{className:"spinner",animation:"grow",variant:"info",size:"lg"})}}]),a}(s.Component),q=a(44),W=function e(){var t=this;Object(i.a)(this,e),this.magicSplash=function(e){return t.app.get("/".concat(e))},this.app=x.a.create({baseURL:"https://api.unsplash.com/search/photos"})},Z=function e(){var t=this;Object(i.a)(this,e),this.getUnsplash=function(){return t.app.get("/api/unsplash")},this.app=x.a.create({baseURL:"http://localhost:5000/",withCredentials:!0})},J=function(e){var t=e.alt_description,a=e.urls;return Object(w.jsx)("div",{md:3,className:"random-card-div",children:Object(w.jsx)("div",{className:"random-card",children:Object(w.jsx)("img",{src:a.regular,alt:t})})})},V=function(e){var t=e.image,a=e._id,s=e.title,n=e.price;return Object(w.jsx)(b.a,{md:3,className:"home-col",children:Object(w.jsxs)(S.b,{className:"nav-link",to:n?"/book/details/"+a:"/post/details/"+a,children:[Object(w.jsx)("img",{className:"card-img",src:t,alt:s+" image"}),Object(w.jsx)("button",{class:"title",children:s})]})})},Q=function e(){var t=this;Object(i.a)(this,e),this.signup=function(e){return t.app.post("/register",e)},this.login=function(e,a){return t.app.post("/login",{email:e,password:a})},this.logout=function(){return t.app.get("/logout")},this.isLoggedIn=function(){return t.app.post("/isLoggedIn")},this.app=x.a.create({baseURL:"".concat("https://for-words.herokuapp.com/"),withCredentials:!0})},X=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleInputChange=function(t){var a=t.target,s=a.name,n=a.value;e.setState(Object(G.a)({},s,n))},e.handleFormSubmit=function(t){t.preventDefault();var a=e.state,s=a.email,n=a.password;e.authService.login(s,n).then((function(t){e.props.storeUser(t.data),e.props.history.push("/profile"),e.props.closeModal()})).catch((function(e){return console.log(e)}))},e.state={email:"",password:""},e.authService=new Q,e}return Object(l.a)(a,[{key:"render",value:function(){return Object(w.jsx)(_.a,{className:"modal-form",children:Object(w.jsx)(p.a,{children:Object(w.jsxs)(b.a,{md:{span:8,offset:2},children:[Object(w.jsx)("h1",{children:"Login"}),Object(w.jsx)("hr",{}),Object(w.jsxs)(M.a,{className:"login-form",onSubmit:this.handleFormSubmit,children:[Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"email",children:[Object(w.jsx)(M.a.Label,{children:"Email"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.email,onChange:this.handleInputChange,name:"email",placeholder:"Username"})]})}),Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"password",children:[Object(w.jsx)(M.a.Label,{children:"Password"}),Object(w.jsx)(M.a.Control,{type:"password",value:this.state.password,onChange:this.handleInputChange,name:"password",placeholder:"Password"})]})}),Object(w.jsx)("button",{className:"btn-form",children:"Login"})]})]})})})}}]),a}(s.Component),Y=Object(d.g)(X),$=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).queryForImages=function(t){var a=Math.trunc(60*Math.random()-1),s="?page=".concat(a,"&per_page=12&query=").concat("books","&client_id=").concat(t);e.unsplashService.magicSplash(s).then((function(t){return e.setState({photos:t.data.results})})).catch((function(e){return console.log(e)}))},e.loadUnsplash=function(){e.unsplashApiService.getUnsplash().then((function(t){return e.queryForImages(t.data)})).then(e.setState({loading:!0})).catch((function(e){return console.log(e)}))},e.getTimeline=function(){var t=e.bookService.bookList(),a=e.postService.postList();Promise.all([t,a]).then((function(t){e.setState({books:t[0].data,posts:t[1].data})})).catch((function(e){return console.log(e)}))},e.componentDidMount=function(){window.addEventListener("scroll",e.listenScrollEvent.bind(Object(q.a)(e))),e.loadUnsplash(),e.getTimeline()},e.state={photos:void 0,books:!1,posts:!1,timeline:[],modal:!1,loading:!1},e.unsplashService=new W,e.unsplashApiService=new Z,e.bookService=new g,e.postService=new T,e}return Object(l.a)(a,[{key:"listenScrollEvent",value:function(){!1===this.state.modal&&this.setState({modal:!0})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.listenScrollEvent)}},{key:"render",value:function(){var e=this,t=this.props,a=t.loggedUser,s=t.storeUser,n=t.history;return this.state.photos?Object(w.jsx)(w.Fragment,{children:a?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h1",{className:"home-title",children:"for Words..."}),Object(w.jsx)("p",{className:"quotes",children:"\u201cBooks are a uniquely portable magic.\u201d"}),Object(w.jsx)("div",{className:"decambiar"}),this.state.books.length&&Object(w.jsxs)(p.a,{className:"timeline",children:[this.state.books.map((function(e){return Object(w.jsx)(V,Object(c.a)({},e),e._id)})),this.state.posts.map((function(e){return Object(w.jsx)(V,Object(c.a)({},e),e._id)}))]})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"home-page-top",children:[Object(w.jsx)("h1",{className:"home-title",children:"for Words..."}),Object(w.jsx)("p",{className:"quotes",children:"\u201cSo many books, so little time.\u201d"})]}),Object(w.jsx)("div",{className:"random-img",children:this.state.loading?Object(w.jsxs)(w.Fragment,{children:[this.state.photos.map((function(e){return Object(w.jsx)(J,Object(c.a)({},e),e.id)})),this.state.photos.reverse().map((function(e){return Object(w.jsx)(J,Object(c.a)({},e),e.id)})),Object(w.jsx)(m.a,{className:"login-modal",show:this.state.modal,onHide:function(){return e.setState({modal:!1})},children:Object(w.jsx)(Y,{history:n,handleFormSubmit:this.onSubmit,storeUser:s})})]}):Object(w.jsx)(R.a,{className:"spinner",animation:"grow",variant:"info",size:"lg"})})]})}):Object(w.jsx)(R.a,{className:"spinner",animation:"grow",variant:"info",size:"lg"})}}]),a}(s.Component),ee=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).bookToConfirm=function(t){var a=e.props.match.params.book_id;e.booksService.bookConfirmed(t,a).then((function(e){return e})).catch((function(e){return console.log(e)}))},e.negateBook=function(){e.setState({book:Object(c.a)(Object(c.a)({},e.state.book),{},{accepted:!1})}),e.bookToConfirm(e.state.book.accepted)},e.confirmBook=function(){e.setState({book:Object(c.a)(Object(c.a)({},e.state.book),{},{accepted:!0})}),e.bookToConfirm(e.state.book.accepted)},e.loadBook=function(){var t=e.props.match.params.book_id;e.booksService.bookDetails(t).then((function(e){return console.log(e),e})).then((function(t){return e.setState({book:t.data})})).catch((function(e){return console.log(e)}))},e.state={book:void 0},e.booksService=new g,e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.loadBook()}},{key:"render",value:function(){var e=this;return Object(w.jsx)(_.a,{children:this.state.book?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(b.a,{md:{span:4,offset:4},children:[Object(w.jsx)(u.a,{className:"cover-img",src:this.state.book.image,alt:this.state.book.title}),Object(w.jsxs)("h3",{className:"profile-name",children:[this.state.book.title,Object(w.jsx)(u.a,{className:"profile-check",src:""})]}),Object(w.jsxs)("p",{className:"profile-email",children:[this.state.book.description," | ",this.state.book.price," \u20ac"]}),Object(w.jsx)("p",{className:"profile-bio"}),Object(w.jsx)("p",{className:"profile-email",children:Object(w.jsxs)(S.b,{className:"link-botton",to:"/profile/"+this.state.book.owner[0]._id,children:[this.state.book.owner[0].firstName," ",this.state.book.owner[0].lastName]})}),Object(w.jsx)("br",{})]}),this.props.loggedUser&&"ADMIN"===this.props.loggedUser.role?Object(w.jsx)(b.a,{md:{span:4,offset:4},children:this.state.book.accepted?Object(w.jsxs)(p.a,{className:"mb-3",children:[" ",Object(w.jsx)("button",{className:"link-botton",onClick:function(){return e.negateBook()},children:"Negate book"})]}):Object(w.jsxs)(p.a,{className:"mb-3",children:[" ",Object(w.jsx)("button",{className:"create-button",onClick:function(){return e.confirmBook()},children:"Confirm book"})]})}):Object(w.jsx)(b.a,{md:{span:4,offset:4},children:Object(w.jsx)(p.a,{className:"mb-3"})})]}):Object(w.jsx)(R.a,{className:"spinner",animation:"grow",variant:"info",size:"lg"})})}}]),a}(s.Component),te=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).loadFormInfo=function(t){e.postService.postDetails(t).then((function(t){return e.setState({post:t.data})}))},e.handleInputChange=function(t){var a=t.target,s=a.name,n=a.value;e.setState({post:Object(c.a)(Object(c.a)({},e.state.post),{},Object(G.a)({},s,n))})},e.handleFormSubmit=function(t){var a=e.props.match.params.post_id;t.preventDefault(),e.postService.postEdit(e.state.post,a).then((function(){e.props.history.push("/"),e.props.closeModal()})).catch((function(e){return console.log(e)}))},e.handleFileUpload=function(t){e.setState({loading:!0});var a=new FormData;a.append("image-data",t.target.files[0]),e.uploadsService.uploadImage(a).then((function(t){e.setState({loading:!1,post:Object(c.a)(Object(c.a)({},e.state.post),{},{image:t.data.cloudinary_url})})})).catch((function(e){return console.log(e)}))},e.state={post:{title:"",text:"",image:"",review:"",owner:""},loading:!1},e.postService=new T,e.uploadsService=new B,e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.post_id;this.loadFormInfo(e)}},{key:"render",value:function(){return Object(w.jsx)(_.a,{children:this.state.post?Object(w.jsx)(p.a,{children:Object(w.jsxs)(b.a,{md:{span:8,offset:2},children:[Object(w.jsxs)("h1",{children:["Edit ",this.state.post.title]}),Object(w.jsx)("hr",{}),Object(w.jsxs)(M.a,{onSubmit:this.handleFormSubmit,children:[Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"title",children:[Object(w.jsx)(M.a.Label,{children:"Title"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.post.title,onChange:this.handleInputChange,name:"title",placeholder:"Title"})]})}),Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"text",children:[Object(w.jsx)(M.a.Label,{children:"Text"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.post.text,onChange:this.handleInputChange,name:"text",placeholder:"Text"})]})}),Object(w.jsx)("img",{style:{width:"100px"},src:this.state.post.image,alt:"book cover"}),Object(w.jsxs)(M.a.Group,{className:"mb-3",controlId:"image",children:[Object(w.jsx)(M.a.Label,{children:"Image"}),Object(w.jsx)(M.a.Control,{name:"image",type:"file",onChange:this.handleFileUpload})]}),Object(w.jsx)("button",{className:"btn-form",type:"submit",children:"Edit"})]}),Object(w.jsx)("hr",{}),Object(w.jsx)(S.b,{to:"/",children:Object(w.jsx)("button",{className:"btn-form",children:"go back"})})]})}):Object(w.jsx)(R.a,{})})}}]),a}(s.Component),ae=function e(){var t=this;Object(i.a)(this,e),this.reviewCreate=function(e){return t.app.post("/create",e)},this.reviewDetails=function(e){return t.app.get("/details/".concat(e))},this.reviewEdit=function(e,a){return t.app.put("/".concat(a),e)},this.reviewDelete=function(e){return t.app.delete("/".concat(e))},this.app=x.a.create({baseURL:"".concat("https://for-words.herokuapp.com/","/review"),withCredentials:!0})},se=(a(15),a(103)),ne=a(168),oe=a(101),re=a.n(oe),ce=a(96),ie=a.n(ce),le=a(97),je=a.n(le),he=a(98),de=a.n(he),be=a(99),ue=a.n(be),pe=a(100),me=a.n(pe),Oe=a(165),xe=Object(se.a)({iconFilled:{color:"#ff6d75"},iconHover:{color:"#ff3d47"}})(ne.a);ie.a,je.a,de.a,ue.a,me.a;var fe=function(e){var t=e.handleRating;return Object(w.jsx)(Oe.a,{component:"fieldset",mb:4,borderColor:"transparent",children:Object(w.jsx)(xe,{onChange:function(e,a){t(a)},name:"customized-color",defaultValue:0,precision:1,icon:Object(w.jsx)(re.a,{fontSize:"inherit"})})})},ge=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleInputChange=function(t){var a=t.target,s=a.name,n=a.value;e.setState({review:Object(c.a)(Object(c.a)({},e.state.review),{},Object(G.a)({},s,n))})},e.handleRating=function(t){e.setState({review:Object(c.a)(Object(c.a)({},e.state.review),{},{points:t})})},e.handleFormSubmit=function(t){t.preventDefault(),e.reviewService.reviewCreate(e.state.review).then((function(){e.props.history.push("/"),e.props.closeModal()})).catch((function(e){return console.log(e)}))},e.state={review:{title:"",text:"",points:"",owner:""},loading:!1},e.reviewService=new ae,e.uploadService=new B,e}return Object(l.a)(a,[{key:"render",value:function(){return Object(w.jsx)(_.a,{children:Object(w.jsx)(p.a,{children:Object(w.jsxs)(b.a,{md:{span:8,offset:2},children:[Object(w.jsx)("h1",{children:"New Review"}),Object(w.jsx)("hr",{}),Object(w.jsxs)(M.a,{onSubmit:this.handleFormSubmit,children:[Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"title",children:[Object(w.jsx)(M.a.Label,{children:"Title"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.title,onChange:this.handleInputChange,name:"title",placeholder:"Title"})]})}),Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"text",children:[Object(w.jsx)(M.a.Label,{children:"Review"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.text,onChange:this.handleInputChange,name:"text",placeholder:"Review"})]})}),Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"text",children:[Object(w.jsx)(M.a.Label,{children:"Rating"}),Object(w.jsx)(fe,{type:"number",value:this.state.points,onChange:this.handleInputChange,handleRating:this.handleRating,name:"points"})]})}),Object(w.jsx)("button",{className:"btn-form",type:"submit",children:"Submit"})]}),Object(w.jsx)("hr",{}),Object(w.jsx)(S.b,{to:"/",children:Object(w.jsx)("button",{className:"btn-form",children:"go back"})})]})})})}}]),a}(s.Component),ve=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).loadPost=function(){var t=e.props.match.params.post_id;e.postsService.postDetails(t).then((function(e){return console.log(e.data,"hoy"),e})).then((function(t){return e.setState({post:t.data})})).catch((function(e){return console.log(e)}))},e.state={post:void 0,modal:!1},e.postsService=new T,e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.loadPost()}},{key:"render",value:function(){var e=this,t=this.props,a=t.loggedUser,s=t.storeUser,n=t.history;return Object(w.jsx)(w.Fragment,{children:this.state.post?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(b.a,{md:{span:4,offset:4},children:[Object(w.jsx)(u.a,{className:"cover-img",src:this.state.post.image,alt:this.state.post.title}),Object(w.jsxs)("h3",{className:"profile-name",children:[this.state.post.title,Object(w.jsx)(u.a,{className:"profile-check",src:""})]}),Object(w.jsx)("p",{className:"profile-bio",children:this.state.post.text})]}),Object(w.jsx)(b.a,{md:{span:6,offset:3},children:Object(w.jsxs)(p.a,{className:"mb-3",children:[Object(w.jsx)(b.a,{children:Object(w.jsx)("button",{className:"mint-button",children:Object(w.jsxs)(S.b,{className:"normalize-link",to:"/profile/"+this.state.post.owner[0]._id,children:[this.state.post.owner[0].firstName," ",this.state.post.owner[0].lastName]})})}),Object(w.jsx)(b.a,{children:Object(w.jsx)("button",{className:"blue-button",onClick:function(){return e.setState({modal:!0,review:!0})},children:"add review"})}),Object(w.jsx)(b.a,{children:Object(w.jsx)("button",{className:"pink-button",onClick:function(){return e.setState({modal:!0})},children:"edit post"})})]})}),Object(w.jsx)("br",{}),Object(w.jsxs)(b.a,{md:{span:4,offset:4},children:[Object(w.jsx)("p",{className:"profile-email",children:"Reviews: "}),this.state.post.review.map((function(e){return Object(w.jsx)("p",{children:e.text})}))]}),Object(w.jsxs)(m.a,{backdrop:"static",keyboard:!1,size:"lg",show:this.state.modal,onHide:function(){return e.setState({modal:!1})},children:[Object(w.jsx)(m.a.Header,{closeButton:!0}),Object(w.jsx)(m.a.Body,{children:this.state.review?Object(w.jsx)(ge,Object(c.a)(Object(c.a)({},this.props),{},{history:n,closeModal:function(){return e.setState({modal:!1})},loggedUser:a,storeUser:s})):Object(w.jsx)(te,Object(c.a)(Object(c.a)({},this.props),{},{history:n,closeModal:function(){return e.setState({modal:!1})},loggedUser:a,storeUser:s}))})]})]}):Object(w.jsx)(R.a,{className:"spinner",animation:"grow",variant:"info",size:"lg"})})}}]),a}(s.Component),Ce=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).loadFormInfo=function(t){e.bookService.bookDetails(t).then((function(t){return e.setState({book:t.data})}))},e.handleInputChange=function(t){var a=t.target,s=a.name,n=a.value;e.setState({book:Object(c.a)(Object(c.a)({},e.state.book),{},Object(G.a)({},s,n))})},e.handleFormSubmit=function(t){var a=e.props.match.params.book_id;t.preventDefault(),e.bookService.bookEdit(e.state.book,a).then((function(){e.props.history.push("/"),e.props.closeModal()})).catch((function(e){return console.log(e)}))},e.handleFileUpload=function(t){e.setState({loading:!0});var a=new FormData;a.append("image-data",t.target.files[0]),e.uploadsService.uploadImage(a).then((function(t){e.setState({loading:!1,book:Object(c.a)(Object(c.a)({},e.state.book),{},{image:t.data.cloudinary_url})})})).catch((function(e){return console.log(e)}))},e.state={book:{title:"",author:"",publisher:"",image:"",description:"",accepted:"",price:"",currency:"",review:"",owner:""},loading:!1},e.bookService=new g,e.uploadsService=new B,e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.book_id;this.loadFormInfo(e)}},{key:"render",value:function(){return console.log(this.props,"PROPS"),Object(w.jsx)(_.a,{children:this.state.book?Object(w.jsx)(p.a,{children:Object(w.jsxs)(b.a,{md:{span:8,offset:2},children:[Object(w.jsxs)("h1",{children:["Edit ",this.state.book.title]}),Object(w.jsx)("hr",{}),Object(w.jsxs)(M.a,{onSubmit:this.handleFormSubmit,children:[Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"title",children:[Object(w.jsx)(M.a.Label,{children:"Title"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.book.title,onChange:this.handleInputChange,name:"title",placeholder:"Title"})]})}),Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"description",children:[Object(w.jsx)(M.a.Label,{children:"Description"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.book.description,onChange:this.handleInputChange,name:"description",placeholder:"Description"})]})}),Object(w.jsxs)(p.a,{className:"mb-3",children:[Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"author",children:[Object(w.jsx)(M.a.Label,{children:"Author"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.book.author,onChange:this.handleInputChange,name:"author",placeholder:"Author"})]}),Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"publisher",children:[Object(w.jsx)(M.a.Label,{children:"Publisher"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.book.publisher,onChange:this.handleInputChange,name:"publisher",placeholder:"Publisher"})]})]}),Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"description",children:[Object(w.jsx)(M.a.Label,{children:"Description"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.book.description,onChange:this.handleInputChange,name:"description",placeholder:"Description"})]})}),Object(w.jsxs)(M.a.Group,{className:"mb-3",controlId:"price",children:[Object(w.jsx)(M.a.Label,{children:"Price"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.book.price,onChange:this.handleInputChange,name:"price",placeholder:"Price"})]}),Object(w.jsx)("img",{style:{width:"100px"},src:this.state.book.image,alt:"book cover"}),Object(w.jsxs)(M.a.Group,{className:"mb-3",controlId:"image",children:[Object(w.jsx)(M.a.Label,{children:"Image"}),Object(w.jsx)(M.a.Control,{name:"image",type:"file",onChange:this.handleFileUpload})]}),Object(w.jsx)("button",{className:"btn-form",type:"submit",children:"edit"})]}),Object(w.jsx)("hr",{}),Object(w.jsx)(S.b,{to:"/",children:Object(w.jsx)("button",{className:"btn-form",children:"go back"})})]})}):Object(w.jsx)(R.a,{})})}}]),a}(s.Component),ke=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).loadFormInfo=function(t){e.reviewService.reviewDetails(t).then((function(t){return e.setState({review:t.data})}))},e.handleInputChange=function(t){var a=t.target,s=a.name,n=a.value;e.setState({review:Object(c.a)(Object(c.a)({},e.state.review),{},Object(G.a)({},s,n))})},e.handleFormSubmit=function(t){var a=e.props.match.params.review_id;t.preventDefault(),e.reviewService.reviewEdit(e.state.review,a).then((function(){e.props.history.push("/"),e.props.closeModal()})).catch((function(e){return console.log(e)}))},e.handleFileUpload=function(t){e.setState({loading:!0});var a=new FormData;a.append("image-data",t.target.files[0]),e.uploadsService.uploadImage(a).then((function(t){e.setState({loading:!1,review:Object(c.a)(Object(c.a)({},e.state.review),{},{image:t.data.cloudinary_url})})})).catch((function(e){return console.log(e)}))},e.state={review:{title:"",text:"",points:"",owner:""},loading:!1},e.reviewService=new ae,e.uploadsService=new B,e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.review_id;this.loadFormInfo(e)}},{key:"render",value:function(){return console.log(this.props,"PROPS"),Object(w.jsx)(_.a,{children:this.state.review?Object(w.jsx)(p.a,{children:Object(w.jsxs)(b.a,{md:{span:8,offset:2},children:[Object(w.jsxs)("h1",{children:["Edit ",this.state.review.title]}),Object(w.jsx)("hr",{}),Object(w.jsxs)(M.a,{onSubmit:this.handleFormSubmit,children:[Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"title",children:[Object(w.jsx)(M.a.Label,{children:"Title"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.review.title,onChange:this.handleInputChange,name:"title",placeholder:"Title"})]})}),Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"text",children:[Object(w.jsx)(M.a.Label,{children:"Review"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.review.text,onChange:this.handleInputChange,name:"text",placeholder:"Review"})]})}),Object(w.jsx)("button",{className:"btn-form",type:"submit",children:"edit"})]}),Object(w.jsx)("hr",{}),Object(w.jsx)(S.b,{to:"/",children:Object(w.jsx)("button",{className:"btn-form",children:"go back"})})]})}):Object(w.jsx)(R.a,{})})}}]),a}(s.Component),Se=function(e){var t=e.storeUser,a=e.loggedUser,s=e.fetchUser;return Object(w.jsxs)(d.d,{children:[Object(w.jsx)(d.b,{path:"/",exact:!0,render:function(e){return Object(w.jsx)($,Object(c.a)(Object(c.a)({},e),{},{loggedUser:a,storeUser:t}))}}),Object(w.jsx)(d.b,{path:"/profile",exact:!0,render:function(e){return a?Object(w.jsx)(H,Object(c.a)(Object(c.a)({},e),{},{loggedUser:a,storeUser:t})):Object(w.jsx)(d.a,{to:"/login"})}}),Object(w.jsx)(d.b,{path:"/profile/:user_id",exact:!0,render:function(e){return Object(w.jsx)(K,Object(c.a)(Object(c.a)({},e),{},{fetchUser:s,loggedUser:a,storeUser:t}))}}),Object(w.jsx)(d.b,{path:"/profile/edit/:user_id",exact:!0,render:function(e){return Object(w.jsx)(E,Object(c.a)(Object(c.a)({},e),{},{loggedUser:a}))}}),Object(w.jsx)(d.b,{path:"/book/details/:book_id",render:function(e){return Object(w.jsx)(ee,Object(c.a)({loggedUser:a},e))}}),Object(w.jsx)(d.b,{path:"/book/:book_id",exact:!0,render:function(e){return Object(w.jsx)(Ce,Object(c.a)(Object(c.a)({},e),{},{loggedUser:a,storeUser:t}))}}),Object(w.jsx)(d.b,{path:"/post/details/:post_id",render:function(e){return Object(w.jsx)(ve,Object(c.a)({},e))}}),Object(w.jsx)(d.b,{path:"/post/:post_id",exact:!0,render:function(e){return Object(w.jsx)(te,Object(c.a)(Object(c.a)({},e),{},{loggedUser:a,storeUser:t}))}}),Object(w.jsx)(d.b,{path:"/review/:review_id",exact:!0,render:function(e){return Object(w.jsx)(ke,Object(c.a)(Object(c.a)({},e),{},{loggedUser:a,storeUser:t}))}})]})},we=a(35),Ne=a(167),ye=a(102),Ie=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleInputChange=function(t){var a=t.target,s=a.name,n=a.value;e.setState({user:Object(c.a)(Object(c.a)({},e.state.user),{},Object(G.a)({},s,n))})},e.handleFormSubmit=function(t){t.preventDefault(),e.authService.signup(e.state.user).then((function(){e.props.history.push("/profile"),e.props.closeModal()})).catch((function(e){return console.log(e)}))},e.handleFileUpload=function(t){e.setState({loading:!0});var a=new FormData;a.append("image-data",t.target.files[0]),e.uploadsService.uploadImage(a).then((function(a){e.setState({loading:!1,user:Object(c.a)(Object(c.a)({},e.state.user),{},Object(G.a)({},t.target.name,a.data.cloudinary_url))})})).catch((function(e){return console.log(e)}))},e.state={user:{email:"",password:"",firstName:"",lastName:"",image:"",cover:"",bio:"",road:"",apartment:"",city:"",state:""},loading:!1},e.authService=new Q,e.uploadsService=new B,e}return Object(l.a)(a,[{key:"render",value:function(){return Object(w.jsx)(_.a,{className:"modal-form",children:Object(w.jsx)(p.a,{children:Object(w.jsxs)(b.a,{md:{span:8,offset:2},children:[Object(w.jsx)("h1",{children:"Sign Up"}),Object(w.jsx)("hr",{}),Object(w.jsxs)(M.a,{onSubmit:this.handleFormSubmit,children:[Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"email",children:[Object(w.jsx)(M.a.Label,{children:"email"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.email,onChange:this.handleInputChange,name:"email",placeholder:"Username"})]})}),Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"password",children:[Object(w.jsx)(M.a.Label,{children:"Password"}),Object(w.jsx)(M.a.Control,{type:"password",value:this.state.password,onChange:this.handleInputChange,name:"password",placeholder:"Password"})]})}),Object(w.jsxs)(p.a,{className:"mb-3",children:[Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"firstName",children:[Object(w.jsx)(M.a.Label,{children:"First name"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.firstName,onChange:this.handleInputChange,name:"firstName",placeholder:"First name"})]}),Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"lastName",children:[Object(w.jsx)(M.a.Label,{children:"Last name"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.lastName,onChange:this.handleInputChange,name:"lastName",placeholder:"Last name"})]})]}),Object(w.jsx)(p.a,{className:"mb-3",children:Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"bio",children:[Object(w.jsx)(M.a.Label,{children:"Bio"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.bio,onChange:this.handleInputChange,name:"bio",placeholder:"Bio"})]})}),Object(w.jsxs)(M.a.Group,{className:"mb-3",controlId:"road",children:[Object(w.jsx)(M.a.Label,{children:"Address"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.road,onChange:this.handleInputChange,name:"road",placeholder:"Street, number"})]}),Object(w.jsxs)(M.a.Group,{className:"mb-3",controlId:"apartment",children:[Object(w.jsx)(M.a.Label,{children:"Address 2"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.apartment,onChange:this.handleInputChange,name:"apartment",placeholder:"Apartment, studio, or floor"})]}),Object(w.jsxs)(p.a,{className:"mb-3",children:[Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"city",children:[Object(w.jsx)(M.a.Label,{children:"City"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.city,onChange:this.handleInputChange,name:"city",placeholder:"City"})]}),Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"state",children:[Object(w.jsx)(M.a.Label,{children:"State"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.state,onChange:this.handleInputChange,name:"state",placeholder:"State"})]}),Object(w.jsxs)(M.a.Group,{as:b.a,controlId:"zip",children:[Object(w.jsx)(M.a.Label,{children:"Zip"}),Object(w.jsx)(M.a.Control,{type:"text",value:this.state.zip,onChange:this.handleInputChange,name:"zip",placeholder:"Zip"})]})]}),Object(w.jsxs)(M.a.Group,{className:"mb-3",controlId:"image",children:[Object(w.jsx)(M.a.Label,{children:"Image"}),Object(w.jsx)(M.a.Control,{name:"image",type:"file",onChange:this.handleFileUpload})]}),Object(w.jsxs)(M.a.Group,{className:"mb-3",controlId:"cover",children:[Object(w.jsx)(M.a.Label,{children:"Cover"}),Object(w.jsx)(M.a.Control,{name:"cover",type:"file",onChange:this.handleFileUpload})]}),Object(w.jsx)("button",{className:"btn-form",type:"submit",children:"Submit"})]}),Object(w.jsx)("hr",{}),Object(w.jsx)(S.b,{to:"/",children:Object(w.jsx)("button",{className:"btn-form",children:"go back"})})]})})})}}]),a}(s.Component),Ue=a(94),Le=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(w.jsxs)(M.a,{className:"d-flex",children:[Object(w.jsx)(Ue.a,Object(G.a)({className:"search-bar",onChange:this.props.search,placeholder:"Search",type:"search"},"placeholder","Search")),Object(w.jsx)("button",{className:"search-button",children:"Search"})]})}}]),a}(s.Component),Fe=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={modal:!1},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.history,s=t.loggedUser,n=t.storeUser;return Object(w.jsxs)("li",{className:"dropdown",children:[Object(w.jsx)("button",{onClick:function(){return e.setState({modal:!0,isBook:!0})},children:this.props.val}),Object(w.jsx)("button",{onClick:function(){return e.setState({modal:!0,isBook:!1})},children:this.props.val}),Object(w.jsxs)(m.a,{backdrop:"static",keyboard:!1,size:"lg",show:this.state.modal,onHide:function(){return e.setState({modal:!1})},children:[Object(w.jsx)(m.a.Header,{closeButton:!0}),Object(w.jsx)(m.a.Body,{children:this.state.isBook?Object(w.jsx)(ee,{history:a,closeModal:function(){return e.setState({modal:!1})},loggedUser:s,storeUser:n}):Object(w.jsx)(ve,{history:a,closeModal:function(){return e.setState({modal:!1})},loggedUser:s,storeUser:n})})]})]})}}]),a}(s.Component),De=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(w.jsx)("div",{className:"border-results",children:Object(w.jsx)("ul",{className:"search-results",children:this.props.data.map((function(e){return Object(w.jsx)(Fe,{val:e.title},e)}))})})}}]),a}(s.Component),Ge=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={data:s.props.timeline,appName:"React Search Bar",list:void 0},s}return Object(l.a)(a,[{key:"searchData",value:function(e){var t=this.state.data.filter((function(t){return t.title.toLowerCase().includes(e.target.value.toLowerCase())}));this.setState({list:t})}},{key:"componentDidUpdate",value:function(e,t){var a,s;(null===(a=this.props.timeline)||void 0===a?void 0:a.length)!==(null===(s=e.timeline)||void 0===s?void 0:s.length)&&this.setState({data:this.props.timeline})}},{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)(Le,{search:this.searchData.bind(this)}),this.state.list?Object(w.jsx)(De,{data:this.state.list}):null]})}}]),a}(s.Component),_e=a.p+"static/media/logo.9df91d2e.svg",Me=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).logout=function(){e.authService.logout().then((function(){return e.props.storeUser(void 0)})).catch((function(e){return console.log(e)}))},e.getTimeline=function(){var t=e.bookService.bookList(),a=e.postService.postList();Promise.all([t,a]).then((function(t){console.log(t),e.setState({books:t[0].data,posts:t[1].data,timeline:[].concat(Object(we.a)(t[0].data),Object(we.a)(t[1].data))})})).catch((function(e){return console.log(e)}))},e.handleClose=function(){e.setState({show:!1})},e.handleShow=function(){e.setState({show:!0})},e.state={users:void 0,books:void 0,posts:void 0,modal:!1},e.usersService=new f,e.authService=new Q,e.bookService=new g,e.postService=new T,e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getTimeline()}},{key:"render",value:function(){var e=this,t=this.props,a=t.loggedUser,s=t.storeUser,n=t.history;return Object(w.jsxs)(Ne.a,{className:"navbar",bg:"light",variant:"light",expand:"md",children:[Object(w.jsxs)(Ne.a.Brand,{href:"/",children:[Object(w.jsx)("img",{className:"logo",src:_e,alt:""}),Object(w.jsx)("button",{className:"brand",children:"forWords"})]}),Object(w.jsx)(Ne.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(w.jsx)(Ne.a.Collapse,{className:"justify-content-end",children:Object(w.jsx)(ye.a,{className:"mr-auto",children:a?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Ge,{books:this.state.books,posts:this.state.posts,timeline:this.state.timeline}),Object(w.jsxs)(S.b,{className:"navbar-link",to:"/profile",children:[" ",Object(w.jsx)("button",{className:"navbar-button",children:a?a.firstName:""})]}),Object(w.jsx)("button",{className:"navbar-button",children:Object(w.jsx)("span",{className:"navbar-link",onClick:this.logout,children:"Logout"})})]}):Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("button",{className:"navbar-button",onClick:function(){return e.setState({modal:!0,registerShown:!0})},children:"Register"}),Object(w.jsx)("button",{className:"navbar-button",onClick:function(){return e.setState({modal:!0,registerShown:!1})},children:"Login"}),Object(w.jsxs)(m.a,{backdrop:"static",keyboard:!1,size:"lg",show:this.state.modal,onHide:function(){return e.setState({modal:!1})},children:[Object(w.jsx)(m.a.Header,{closeButton:!0}),Object(w.jsx)(m.a.Body,{children:this.state.registerShown?Object(w.jsx)(Ie,{history:n,closeModal:function(){return e.setState({modal:!1})},loggedUser:a,storeUser:s}):Object(w.jsx)(Y,{history:n,closeModal:function(){return e.setState({modal:!1})},loggedUser:a,storeUser:s})})]})]})})})})]})}}]),a}(s.Component),Be=function(){return Object(w.jsx)("footer",{className:"footer",children:"\xabthe purpose of life is a life of purpose\xbb"})},Pe=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).storeUser=function(t){return e.setState({loggedUser:t})},e.fetchUser=function(){e.authService.isLoggedIn().then((function(t){return e.storeUser(t.data)})).catch((function(){return e.storeUser(void 0)}))},e.componentDidMount=function(){return e.fetchUser()},e.state={loggedUser:void 0},e.authService=new Q,e}return Object(l.a)(a,[{key:"render",value:function(){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Me,Object(c.a)(Object(c.a)({},this.props),{},{storeUser:this.storeUser,loggedUser:this.state.loggedUser})),Object(w.jsx)(Se,Object(c.a)(Object(c.a)({},this.props),{},{fetchUser:this.fetchUser,storeUser:this.storeUser,loggedUser:this.state.loggedUser})),Object(w.jsx)(Be,{})]})}}]),a}(s.Component);r.a.render(Object(w.jsx)(S.a,{children:Object(w.jsx)(n.a.StrictMode,{children:Object(w.jsx)(Pe,{})})}),document.getElementById("root"))}},[[145,1,2]]]);
//# sourceMappingURL=main.b9fe22b1.chunk.js.map